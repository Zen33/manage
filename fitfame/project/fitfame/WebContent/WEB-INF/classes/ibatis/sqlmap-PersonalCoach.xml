<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="PersonalCoach">
	<typeAlias alias="PersonalCoach" type="fitfame.po.PersonalCoach" />

	<select id="getPersonalCoachList" resultClass="PersonalCoach">
		select * from personal_coach where uid = #value#
	</select>
	
	<select id="getPersonalCoach" resultClass="PersonalCoach" parameterClass="java.util.Map">
		select * from personal_coach where uid = #uid# and sid = #sid#
	</select>
	
	<select id="getPersonCoachByOnlineService" resultClass="PersonalCoach">
		select * from personal_coach where sid = #value# and online_unsign != 0;
	</select>
	
	<select id="getPersonCoachByOfflineService" resultClass="PersonalCoach">
		select * from personal_coach where sid = #value# and offline_unsign != 0;
	</select>
	
	<insert id="insertPersonalCoach" parameterClass="PersonalCoach">
		insert into personal_coach values (#uid#, #cid#, #sdate#, #edate#, #sid#, #price#, #online#, #offline#,#online_unsign#,#offline_unsign#)
	</insert>
	
	<delete id="deletePersonalCoach">
		delete from personal_coach where where uid = #uid# and sid = #sid#
	</delete>
	
	<update id="updatePersonalCoach" parameterClass="PersonalCoach">
	update personal_coach
	<dynamic prepend="SET ">
			<isNotEqual property="edate" compareValue="-1" prepend=","><![CDATA[ edate=#edate# ]]></isNotEqual>
			<isNotEqual property="online" compareValue="-1" prepend=","><![CDATA[ online=#online# ]]></isNotEqual>
			<isNotEqual property="offline" compareValue="-1" prepend=","><![CDATA[ offline=#offline# ]]></isNotEqual>
			<isNotEqual property="online_unsign" compareValue="-1" prepend=","><![CDATA[ online_unsign=#online_unsign# ]]></isNotEqual>
			<isNotEqual property="offline_unsign" compareValue="-1" prepend=","><![CDATA[ offline_unsign=#offline_unsign# ]]></isNotEqual>
    </dynamic>
	<dynamic prepend="WHERE">
		 uid = #uid# and sid = #sid#
	</dynamic>
	</update>
</sqlMap>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="AdminInfo">
  <typeAlias alias="AdminInfo" type="fitfame.po.AdminInfo"/>
  
  <select id="getAdminInfo" resultClass="AdminInfo">
    select * from admin_info where name = #name# and pw = #pw#
  </select>
  
  <insert id="insertAdminInfo" parameterClass="AdminInfo">
    insert into admin_info values (null, #name#, #pw#)
    <selectKey resultClass="int" type="post" keyProperty="id" >
      select LAST_INSERT_ID() as value
    </selectKey> 
  </insert>
  
  <delete id="deleteAdminInfo" parameterClass="AdminInfo">
    delete from admin_info where id = #id#
  </delete>
  
  <update id="updateAdminInfo" parameterClass="AdminInfo">
	update admin_info
	<dynamic prepend="SET ">
		<isNotEmpty property="pw" prepend=","><![CDATA[ pw=#pw# ]]></isNotEmpty>
		<isNotEmpty property="name" prepend=","><![CDATA[ name=#name# ]]></isNotEmpty>
	</dynamic>
	<dynamic prepend="WHERE">
		 id = #id#
	</dynamic>
	</update>

</sqlMap>
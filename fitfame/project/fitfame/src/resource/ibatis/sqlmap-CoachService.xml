<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="CoachService">
	<typeAlias alias="CoachService" type="fitfame.po.CoachService" />

	<select id="getCoachService" resultClass="CoachService">
		select * from
		coach_service where sid = #value#
	</select>
	
	<select id="getCoachServiceList" resultClass="CoachService">
		select * from
		coach_service where cid = #value# and inuse = 0
	</select>

	<insert id="insertCoachService" parameterClass="CoachService">
		insert into coach_service values (null, #cid#, #name#, #intro#,
		#cost#, #month#, #online_times#, #offline_times#,  #online#, #offline#, #num#, #inuse#)
		<selectKey resultClass="long" type="post" keyProperty="sid">
			select LAST_INSERT_ID() as value
		</selectKey>
	</insert>

	<delete id="deleteCoachService">
		delete from coach_service where sid = #value#
	</delete>

	<update id="updateCoachService" parameterClass="CoachService">
		update coach_service
		<dynamic prepend="SET ">
			<isNotEmpty property="name" prepend=","><![CDATA[ name=#name# ]]></isNotEmpty>
			<isNotEmpty property="intro" prepend=","><![CDATA[ intro=#intro# ]]></isNotEmpty>
			<isNotEqual property="cost" compareValue="-1" prepend=","><![CDATA[ cost=#cost# ]]></isNotEqual>
			<isNotEqual property="month" compareValue="-1" prepend=","><![CDATA[ month=#month# ]]></isNotEqual>
			<isNotEqual property="online_times" compareValue="-1" prepend=","><![CDATA[ online_times=#online_times# ]]></isNotEqual>
			<isNotEqual property="offline_times" compareValue="-1" prepend=","><![CDATA[ offline_times=#offline_times# ]]></isNotEqual>
			<isNotEqual property="online" compareValue="-1" prepend=","><![CDATA[ online=#online# ]]></isNotEqual>
			<isNotEqual property="offline" compareValue="-1" prepend=","><![CDATA[ offline=#offline# ]]></isNotEqual>
			<isNotEqual property="num" compareValue="-1" prepend=","><![CDATA[ num=#num# ]]></isNotEqual>
		</dynamic>
		<dynamic prepend="WHERE">
			sid = #sid#
		</dynamic>
	</update>
</sqlMap>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="UserInfo">
  <typeAlias alias="UserInfo" type="fitfame.po.UserInfo"/>
  
  <select id="getUserInfoByUid" resultClass="UserInfo">
    select * from user_info where uid = #value#
  </select>
  
  <insert id="insertUserInfo" parameterClass="UserInfo">
    insert into user_info values (#uid#, #sex#, #username#, #icon#, #brithday#, #height#, #weight#, #city#, #dist#, #category#)
  </insert>
  
  <delete id="deleteUserInfo">
    delete from user_info where uid = #value#
  </delete>
  
  <update id="updateUserInfo" parameterClass="UserInfo">
	update user_info
	<dynamic prepend="SET ">
		<isNotEmpty property="sex" prepend=","><![CDATA[ sex=#sex# ]]></isNotEmpty>
		<isNotEmpty property="username" prepend=","><![CDATA[ username=#username# ]]></isNotEmpty>
		<isNotEmpty property="icon" prepend=","><![CDATA[ icon=#icon# ]]></isNotEmpty>
		<isNotEqual property="brithday" compareValue="-1" prepend=","><![CDATA[ brithday=#brithday# ]]></isNotEqual>
		<isNotEqual property="height" compareValue="-1" prepend=","><![CDATA[ height=#height# ]]></isNotEqual>
		<isNotEqual property="weight" compareValue="-1" prepend=","><![CDATA[ weight=#weight# ]]></isNotEqual>
		<isNotEmpty property="city" prepend=","><![CDATA[ city=#city# ]]></isNotEmpty>
		<isNotEmpty property="dist" prepend=","><![CDATA[ dist=#dist# ]]></isNotEmpty>
		<isNotEqual property="category" compareValue="-1" prepend=","><![CDATA[ category=#category# ]]></isNotEqual>
	</dynamic>
	<dynamic prepend="WHERE">
		 uid = #uid#
	</dynamic>
	</update>

</sqlMap>